{"version":3,"file":"pikaday.min.js","sources":["../src/pikaday.js"],"sourcesContent":["/*!\n * Pikaday\n *\n * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/Pikaday/Pikaday\n */\n\n(function (root, factory)\n{\n    'use strict';\n\n    var moment;\n    if (typeof exports === 'object') {\n        // CommonJS module\n        // Load moment.js as an optional dependency\n        try { moment = require('moment'); } catch (e) {}\n        module.exports = factory(moment);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(function (req)\n        {\n            // Load moment.js as an optional dependency\n            var id = 'moment';\n            try { moment = req(id); } catch (e) {}\n            return factory(moment);\n        });\n    } else {\n        root.Pikaday = factory(root.moment);\n    }\n}(this, function (moment)\n{\n    'use strict';\n\n    /**\n     * feature detection and helper functions\n     */\n    var hasMoment = typeof moment === 'function',\n\n    hasEventListeners = !!window.addEventListener,\n\n    document = window.document,\n\n    sto = window.setTimeout,\n\n    addEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.addEventListener(e, callback, !!capture);\n        } else {\n            el.attachEvent('on' + e, callback);\n        }\n    },\n\n    removeEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.removeEventListener(e, callback, !!capture);\n        } else {\n            el.detachEvent('on' + e, callback);\n        }\n    },\n\n    trim = function(str)\n    {\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\n    },\n\n    hasClass = function(el, cn)\n    {\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n    },\n\n    addClass = function(el, cn)\n    {\n        if (!hasClass(el, cn)) {\n            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\n        }\n    },\n\n    removeClass = function(el, cn)\n    {\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n    },\n\n    isArray = function(obj)\n    {\n        return (/Array/).test(Object.prototype.toString.call(obj));\n    },\n\n    isDate = function(obj)\n    {\n        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n    },\n\n    isWeekend = function(date)\n    {\n        var day = date.getDay();\n        return day === 0 || day === 6;\n    },\n\n    isLeapYear = function(year)\n    {\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n\n    getDaysInMonth = function(year, month)\n    {\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n\n    setToStartOfDay = function(date)\n    {\n        if (isDate(date)) date.setHours(0,0,0,0);\n    },\n\n    compareDates = function(a,b)\n    {\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n        return a.getTime() === b.getTime();\n    },\n\n    extend = function(to, from, overwrite)\n    {\n        var prop, hasProp;\n        for (prop in from) {\n            hasProp = to[prop] !== undefined;\n            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n                if (isDate(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = new Date(from[prop].getTime());\n                    }\n                }\n                else if (isArray(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = from[prop].slice(0);\n                    }\n                } else {\n                    to[prop] = extend({}, from[prop], overwrite);\n                }\n            } else if (overwrite || !hasProp) {\n                to[prop] = from[prop];\n            }\n        }\n        return to;\n    },\n\n    fireEvent = function(el, eventName, data)\n    {\n        var ev;\n\n        if (document.createEvent) {\n            ev = document.createEvent('HTMLEvents');\n            ev.initEvent(eventName, true, false);\n            ev = extend(ev, data);\n            el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n            ev = document.createEventObject();\n            ev = extend(ev, data);\n            el.fireEvent('on' + eventName, ev);\n        }\n    },\n\n    adjustCalendar = function(calendar) {\n        if (calendar.month < 0) {\n            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\n            calendar.month += 12;\n        }\n        if (calendar.month > 11) {\n            calendar.year += Math.floor(Math.abs(calendar.month)/12);\n            calendar.month -= 12;\n        }\n        return calendar;\n    },\n\n    /**\n     * defaults and localisation\n     */\n    defaults = {\n\n        // bind the picker to a form field\n        field: null,\n\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n        bound: undefined,\n\n        // data-attribute on the input field with an aria assistance tekst (only applied when `bound` is set)\n        ariaLabel: 'Use the arrow keys to pick a date',\n\n        // position of the datepicker, relative to the field (default to bottom & left)\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n        position: 'bottom left',\n\n        // automatically fit in the viewport even if it means repositioning from the position option\n        reposition: true,\n\n        // the default output format for `.toString()` and `field` value\n        format: 'YYYY-MM-DD',\n\n        // the toString function which gets passed a current date object and format\n        // and returns a string\n        toString: null,\n\n        // used to create date object from current input string\n        parse: null,\n\n        // the initial date to view when first opened\n        defaultDate: null,\n\n        // make the `defaultDate` the initial selected value\n        setDefaultDate: false,\n\n        // first day of week (0: Sunday, 1: Monday etc)\n        firstDay: 0,\n\n        // the default flag for moment's strict date parsing\n        formatStrict: false,\n\n        // the minimum/earliest date that can be selected\n        minDate: null,\n        // the maximum/latest date that can be selected\n        maxDate: null,\n\n        // number of years either side, or array of upper/lower range\n        yearRange: 10,\n\n        // show week numbers at head of row\n        showWeekNumber: false,\n\n        // Week picker mode\n        pickWholeWeek: false,\n\n        // used internally (don't config outside)\n        minYear: 0,\n        maxYear: 9999,\n        minMonth: undefined,\n        maxMonth: undefined,\n\n        startRange: null,\n        endRange: null,\n\n        isRTL: false,\n\n        // Additional text to append to the year in the calendar title\n        yearSuffix: '',\n\n        // Render the month after year in the calendar title\n        showMonthAfterYear: false,\n\n        // Render days of the calendar grid that fall in the next or previous month\n        showDaysInNextAndPreviousMonths: false,\n\n        // Allows user to select days that fall in the next or previous month\n        enableSelectionDaysInNextAndPreviousMonths: false,\n\n        // how many months are visible\n        numberOfMonths: 1,\n\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n        // only used for the first display or when a selected date is not visible\n        mainCalendar: 'left',\n\n        // Specify a DOM element to render the calendar in\n        container: undefined,\n\n        // Blur field when date is selected\n        blurFieldOnSelect : true,\n\n        // internationalization\n        i18n: {\n            previousMonth : 'Previous Month',\n            nextMonth     : 'Next Month',\n            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\n            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n        },\n\n        // Theme Classname\n        theme: null,\n\n        // events array\n        events: [],\n\n        // callback function\n        onSelect: null,\n        onOpen: null,\n        onClose: null,\n        onDraw: null,\n\n        // Enable keyboard input\n        keyboardInput: true\n    },\n\n\n    /**\n     * templating functions to abstract HTML rendering\n     */\n    renderDayName = function(opts, day, abbr)\n    {\n        day += opts.firstDay;\n        while (day >= 7) {\n            day -= 7;\n        }\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n    },\n\n    renderDay = function(opts)\n    {\n        var arr = [];\n        var ariaSelected = 'false';\n        if (opts.isEmpty) {\n            if (opts.showDaysInNextAndPreviousMonths) {\n                arr.push('is-outside-current-month');\n\n                if(!opts.enableSelectionDaysInNextAndPreviousMonths) {\n                    arr.push('is-selection-disabled');\n                }\n\n            } else {\n                return '<td class=\"is-empty\"></td>';\n            }\n        }\n        if (opts.isDisabled) {\n            arr.push('is-disabled');\n        }\n        if (opts.isToday) {\n            arr.push('is-today');\n        }\n        if (opts.isSelected) {\n            arr.push('is-selected');\n            ariaSelected = 'true';\n        }\n        if (opts.hasEvent) {\n            arr.push('has-event');\n        }\n        if (opts.isInRange) {\n            arr.push('is-inrange');\n        }\n        if (opts.isStartRange) {\n            arr.push('is-startrange');\n        }\n        if (opts.isEndRange) {\n            arr.push('is-endrange');\n        }\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' +\n                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\n                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\n                        opts.day +\n                 '</button>' +\n               '</td>';\n    },\n\n    renderWeek = function (d, m, y) {\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n        var onejan = new Date(y, 0, 1),\n            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\n    },\n\n    renderRow = function(days, isRTL, pickWholeWeek, isRowSelected)\n    {\n        return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n    },\n\n    renderBody = function(rows)\n    {\n        return '<tbody>' + rows.join('') + '</tbody>';\n    },\n\n    renderHead = function(opts)\n    {\n        var i, arr = [];\n        if (opts.showWeekNumber) {\n            arr.push('<th></th>');\n        }\n        for (i = 0; i < 7; i++) {\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n        }\n        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\n    },\n\n    renderTitle = function(instance, c, year, month, refYear, randId)\n    {\n        var i, j, arr,\n            opts = instance._o,\n            isMinYear = year === opts.minYear,\n            isMaxYear = year === opts.maxYear,\n            html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\n            monthHtml,\n            yearHtml,\n            prev = true,\n            next = true;\n\n        for (arr = [], i = 0; i < 12; i++) {\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\n                (i === month ? ' selected=\"selected\"': '') +\n                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled=\"disabled\"' : '') + '>' +\n                opts.i18n.months[i] + '</option>');\n        }\n\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (isArray(opts.yearRange)) {\n            i = opts.yearRange[0];\n            j = opts.yearRange[1] + 1;\n        } else {\n            i = year - opts.yearRange;\n            j = 1 + year + opts.yearRange;\n        }\n\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\n            if (i >= opts.minYear) {\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"': '') + '>' + (i) + '</option>');\n            }\n        }\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (opts.showMonthAfterYear) {\n            html += yearHtml + monthHtml;\n        } else {\n            html += monthHtml + yearHtml;\n        }\n\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n            prev = false;\n        }\n\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n            next = false;\n        }\n\n        if (c === 0) {\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n        }\n        if (c === (instance._o.numberOfMonths - 1) ) {\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n        }\n\n        return html += '</div>';\n    },\n\n    renderTable = function(opts, data, randId)\n    {\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\n    },\n\n\n    /**\n     * Pikaday constructor\n     */\n    Pikaday = function(options)\n    {\n        var self = this,\n            opts = self.config(options);\n\n        self._onMouseDown = function(e)\n        {\n            if (!self._v) {\n                return;\n            }\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n\n            if (!hasClass(target, 'is-disabled')) {\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n                    if (opts.bound) {\n                        sto(function() {\n                            self.hide();\n                            if (opts.blurFieldOnSelect && opts.field) {\n                                opts.field.blur();\n                            }\n                        }, 100);\n                    }\n                }\n                else if (hasClass(target, 'pika-prev')) {\n                    self.prevMonth();\n                }\n                else if (hasClass(target, 'pika-next')) {\n                    self.nextMonth();\n                }\n            }\n            if (!hasClass(target, 'pika-select')) {\n                // if this is touch event prevent mouse events emulation\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    e.returnValue = false;\n                    return false;\n                }\n            } else {\n                self._c = true;\n            }\n        };\n\n        self._onChange = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n            if (hasClass(target, 'pika-select-month')) {\n                self.gotoMonth(target.value);\n            }\n            else if (hasClass(target, 'pika-select-year')) {\n                self.gotoYear(target.value);\n            }\n        };\n\n        self._onKeyChange = function(e)\n        {\n            e = e || window.event;\n\n            if (self.isVisible()) {\n\n                switch(e.keyCode){\n                    case 13:\n                    case 27:\n                        if (opts.field) {\n                            opts.field.blur();\n                        }\n                        break;\n                    case 37:\n                        e.preventDefault();\n                        self.adjustDate('subtract', 1);\n                        break;\n                    case 38:\n                        self.adjustDate('subtract', 7);\n                        break;\n                    case 39:\n                        self.adjustDate('add', 1);\n                        break;\n                    case 40:\n                        self.adjustDate('add', 7);\n                        break;\n                }\n            }\n        };\n\n        self._onInputChange = function(e)\n        {\n            var date;\n\n            if (e.firedBy === self) {\n                return;\n            }\n            if (opts.parse) {\n                date = opts.parse(opts.field.value, opts.format);\n            } else if (hasMoment) {\n                date = moment(opts.field.value, opts.format, opts.formatStrict);\n                date = (date && date.isValid()) ? date.toDate() : null;\n            }\n            else {\n                date = new Date(Date.parse(opts.field.value));\n            }\n            if (isDate(date)) {\n              self.setDate(date);\n            }\n            if (!self._v) {\n                self.show();\n            }\n        };\n\n        self._onInputFocus = function()\n        {\n            self.show();\n        };\n\n        self._onInputClick = function()\n        {\n            self.show();\n        };\n\n        self._onInputBlur = function()\n        {\n            // IE allows pika div to gain focus; catch blur the input field\n            var pEl = document.activeElement;\n            do {\n                if (hasClass(pEl, 'pika-single')) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n\n            if (!self._c) {\n                self._b = sto(function() {\n                    self.hide();\n                }, 50);\n            }\n            self._c = false;\n        };\n\n        self._onClick = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement,\n                pEl = target;\n            if (!target) {\n                return;\n            }\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n                if (!target.onchange) {\n                    target.setAttribute('onchange', 'return;');\n                    addEvent(target, 'change', self._onChange);\n                }\n            }\n            do {\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n                self.hide();\n            }\n        };\n\n        self.el = document.createElement('div');\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\n        addEvent(self.el, 'change', self._onChange);\n\n        if (opts.keyboardInput) {\n            addEvent(document, 'keydown', self._onKeyChange);\n        }\n\n        if (opts.field) {\n            if (opts.container) {\n                opts.container.appendChild(self.el);\n            } else if (opts.bound) {\n                document.body.appendChild(self.el);\n            } else {\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n            }\n            addEvent(opts.field, 'change', self._onInputChange);\n\n            if (!opts.defaultDate) {\n                if (hasMoment && opts.field.value) {\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n                } else {\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n                }\n                opts.setDefaultDate = true;\n            }\n        }\n\n        var defDate = opts.defaultDate;\n\n        if (isDate(defDate)) {\n            if (opts.setDefaultDate) {\n                self.setDate(defDate, true);\n            } else {\n                self.gotoDate(defDate);\n            }\n        } else {\n            self.gotoDate(new Date());\n        }\n\n        if (opts.bound) {\n            this.hide();\n            self.el.className += ' is-bound';\n            addEvent(opts.trigger, 'click', self._onInputClick);\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\n        } else {\n            this.show();\n        }\n    };\n\n\n    /**\n     * public Pikaday API\n     */\n    Pikaday.prototype = {\n\n\n        /**\n         * configure functionality\n         */\n        config: function(options)\n        {\n            if (!this._o) {\n                this._o = extend({}, defaults, true);\n            }\n\n            var opts = extend(this._o, options, true);\n\n            opts.isRTL = !!opts.isRTL;\n\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\n\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\n\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\n\n            opts.disableWeekends = !!opts.disableWeekends;\n\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\n\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n            if (!isDate(opts.minDate)) {\n                opts.minDate = false;\n            }\n            if (!isDate(opts.maxDate)) {\n                opts.maxDate = false;\n            }\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\n                opts.maxDate = opts.minDate = false;\n            }\n            if (opts.minDate) {\n                this.setMinDate(opts.minDate);\n            }\n            if (opts.maxDate) {\n                this.setMaxDate(opts.maxDate);\n            }\n\n            if (isArray(opts.yearRange)) {\n                var fallback = new Date().getFullYear() - 10;\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n            } else {\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n                if (opts.yearRange > 100) {\n                    opts.yearRange = 100;\n                }\n            }\n\n            return opts;\n        },\n\n        /**\n         * return a formatted string of the current selection (using Moment.js if available)\n         */\n        toString: function(format)\n        {\n            format = format || this._o.format;\n            if (!isDate(this._d)) {\n                return '';\n            }\n            if (this._o.toString) {\n              return this._o.toString(this._d, format);\n            }\n            if (hasMoment) {\n              return moment(this._d).format(format);\n            }\n            return this._d.toDateString();\n        },\n\n        /**\n         * return a Moment.js object of the current selection (if available)\n         */\n        getMoment: function()\n        {\n            return hasMoment ? moment(this._d) : null;\n        },\n\n        /**\n         * set the current selection from a Moment.js object (if available)\n         */\n        setMoment: function(date, preventOnSelect)\n        {\n            if (hasMoment && moment.isMoment(date)) {\n                this.setDate(date.toDate(), preventOnSelect);\n            }\n        },\n\n        /**\n         * return a Date object of the current selection\n         */\n        getDate: function()\n        {\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n        },\n\n        /**\n         * set the current selection\n         */\n        setDate: function(date, preventOnSelect)\n        {\n            if (!date) {\n                this._d = null;\n\n                if (this._o.field) {\n                    this._o.field.value = '';\n                    fireEvent(this._o.field, 'change', { firedBy: this });\n                }\n\n                return this.draw();\n            }\n            if (typeof date === 'string') {\n                date = new Date(Date.parse(date));\n            }\n            if (!isDate(date)) {\n                return;\n            }\n\n            var min = this._o.minDate,\n                max = this._o.maxDate;\n\n            if (isDate(min) && date < min) {\n                date = min;\n            } else if (isDate(max) && date > max) {\n                date = max;\n            }\n\n            this._d = new Date(date.getTime());\n            setToStartOfDay(this._d);\n            this.gotoDate(this._d);\n\n            if (this._o.field) {\n                this._o.field.value = this.toString();\n                fireEvent(this._o.field, 'change', { firedBy: this });\n            }\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n                this._o.onSelect.call(this, this.getDate());\n            }\n        },\n\n        /**\n         * change view to a specific date\n         */\n        gotoDate: function(date)\n        {\n            var newCalendar = true;\n\n            if (!isDate(date)) {\n                return;\n            }\n\n            if (this.calendars) {\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\n                    visibleDate = date.getTime();\n                // get the end of the month\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\n            }\n\n            if (newCalendar) {\n                this.calendars = [{\n                    month: date.getMonth(),\n                    year: date.getFullYear()\n                }];\n                if (this._o.mainCalendar === 'right') {\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n                }\n            }\n\n            this.adjustCalendars();\n        },\n\n        adjustDate: function(sign, days) {\n\n            var day = this.getDate() || new Date();\n            var difference = parseInt(days)*24*60*60*1000;\n\n            var newDay;\n\n            if (sign === 'add') {\n                newDay = new Date(day.valueOf() + difference);\n            } else if (sign === 'subtract') {\n                newDay = new Date(day.valueOf() - difference);\n            }\n\n            this.setDate(newDay);\n        },\n\n        adjustCalendars: function() {\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\n                this.calendars[c] = adjustCalendar({\n                    month: this.calendars[0].month + c,\n                    year: this.calendars[0].year\n                });\n            }\n            this.draw();\n        },\n\n        gotoToday: function()\n        {\n            this.gotoDate(new Date());\n        },\n\n        /**\n         * change view to a specific month (zero-index, e.g. 0: January)\n         */\n        gotoMonth: function(month)\n        {\n            if (!isNaN(month)) {\n                this.calendars[0].month = parseInt(month, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        nextMonth: function()\n        {\n            this.calendars[0].month++;\n            this.adjustCalendars();\n        },\n\n        prevMonth: function()\n        {\n            this.calendars[0].month--;\n            this.adjustCalendars();\n        },\n\n        /**\n         * change view to a specific full year (e.g. \"2012\")\n         */\n        gotoYear: function(year)\n        {\n            if (!isNaN(year)) {\n                this.calendars[0].year = parseInt(year, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        /**\n         * change the minDate\n         */\n        setMinDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.minDate = value;\n                this._o.minYear  = value.getFullYear();\n                this._o.minMonth = value.getMonth();\n            } else {\n                this._o.minDate = defaults.minDate;\n                this._o.minYear  = defaults.minYear;\n                this._o.minMonth = defaults.minMonth;\n                this._o.startRange = defaults.startRange;\n            }\n\n            this.draw();\n        },\n\n        /**\n         * change the maxDate\n         */\n        setMaxDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.maxDate = value;\n                this._o.maxYear = value.getFullYear();\n                this._o.maxMonth = value.getMonth();\n            } else {\n                this._o.maxDate = defaults.maxDate;\n                this._o.maxYear = defaults.maxYear;\n                this._o.maxMonth = defaults.maxMonth;\n                this._o.endRange = defaults.endRange;\n            }\n\n            this.draw();\n        },\n\n        setStartRange: function(value)\n        {\n            this._o.startRange = value;\n        },\n\n        setEndRange: function(value)\n        {\n            this._o.endRange = value;\n        },\n\n        /**\n         * refresh the HTML\n         */\n        draw: function(force)\n        {\n            if (!this._v && !force) {\n                return;\n            }\n            var opts = this._o,\n                minYear = opts.minYear,\n                maxYear = opts.maxYear,\n                minMonth = opts.minMonth,\n                maxMonth = opts.maxMonth,\n                html = '',\n                randId;\n\n            if (this._y <= minYear) {\n                this._y = minYear;\n                if (!isNaN(minMonth) && this._m < minMonth) {\n                    this._m = minMonth;\n                }\n            }\n            if (this._y >= maxYear) {\n                this._y = maxYear;\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\n                    this._m = maxMonth;\n                }\n            }\n\n            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\n\n            for (var c = 0; c < opts.numberOfMonths; c++) {\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\n            }\n\n            this.el.innerHTML = html;\n\n            if (opts.bound) {\n                if(opts.field.type !== 'hidden') {\n                    sto(function() {\n                        opts.trigger.focus();\n                    }, 1);\n                }\n            }\n\n            if (typeof this._o.onDraw === 'function') {\n                this._o.onDraw(this);\n            }\n\n            if (opts.bound) {\n                // let the screen reader user know to use arrow keys\n                opts.field.setAttribute('aria-label', opts.ariaLabel);\n            }\n        },\n\n        adjustPosition: function()\n        {\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect, leftAligned, bottomAligned;\n\n            if (this._o.container) return;\n\n            this.el.style.position = 'absolute';\n\n            field = this._o.trigger;\n            pEl = field;\n            width = this.el.offsetWidth;\n            height = this.el.offsetHeight;\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n            leftAligned = true;\n            bottomAligned = true;\n\n            if (typeof field.getBoundingClientRect === 'function') {\n                clientRect = field.getBoundingClientRect();\n                left = clientRect.left + window.pageXOffset;\n                top = clientRect.bottom + window.pageYOffset;\n            } else {\n                left = pEl.offsetLeft;\n                top  = pEl.offsetTop + pEl.offsetHeight;\n                while((pEl = pEl.offsetParent)) {\n                    left += pEl.offsetLeft;\n                    top  += pEl.offsetTop;\n                }\n            }\n\n            // default position is bottom & left\n            if ((this._o.reposition && left + width > viewportWidth) ||\n                (\n                    this._o.position.indexOf('right') > -1 &&\n                    left - width + field.offsetWidth > 0\n                )\n            ) {\n                left = left - width + field.offsetWidth;\n                leftAligned = false;\n            }\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\n                (\n                    this._o.position.indexOf('top') > -1 &&\n                    top - height - field.offsetHeight > 0\n                )\n            ) {\n                top = top - height - field.offsetHeight;\n                bottomAligned = false;\n            }\n\n            this.el.style.left = left + 'px';\n            this.el.style.top = top + 'px';\n\n            addClass(this.el, leftAligned ? 'left-aligned' : 'right-aligned');\n            addClass(this.el, bottomAligned ? 'bottom-aligned' : 'top-aligned');\n            removeClass(this.el, !leftAligned ? 'left-aligned' : 'right-aligned');\n            removeClass(this.el, !bottomAligned ? 'bottom-aligned' : 'top-aligned');\n        },\n\n        /**\n         * render HTML for a particular month\n         */\n        render: function(year, month, randId)\n        {\n            var opts   = this._o,\n                now    = new Date(),\n                days   = getDaysInMonth(year, month),\n                before = new Date(year, month, 1).getDay(),\n                data   = [],\n                row    = [];\n            setToStartOfDay(now);\n            if (opts.firstDay > 0) {\n                before -= opts.firstDay;\n                if (before < 0) {\n                    before += 7;\n                }\n            }\n            var previousMonth = month === 0 ? 11 : month - 1,\n                nextMonth = month === 11 ? 0 : month + 1,\n                yearOfPreviousMonth = month === 0 ? year - 1 : year,\n                yearOfNextMonth = month === 11 ? year + 1 : year,\n                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\n            var cells = days + before,\n                after = cells;\n            while(after > 7) {\n                after -= 7;\n            }\n            cells += 7 - after;\n            var isWeekSelected = false;\n            for (var i = 0, r = 0; i < cells; i++)\n            {\n                var day = new Date(year, month, 1 + (i - before)),\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n                    isToday = compareDates(day, now),\n                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\n                    isEmpty = i < before || i >= (days + before),\n                    dayNumber = 1 + (i - before),\n                    monthNumber = month,\n                    yearNumber = year,\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\n                                 (opts.maxDate && day > opts.maxDate) ||\n                                 (opts.disableWeekends && isWeekend(day)) ||\n                                 (opts.disableDayFn && opts.disableDayFn(day));\n\n                if (isEmpty) {\n                    if (i < before) {\n                        dayNumber = daysInPreviousMonth + dayNumber;\n                        monthNumber = previousMonth;\n                        yearNumber = yearOfPreviousMonth;\n                    } else {\n                        dayNumber = dayNumber - days;\n                        monthNumber = nextMonth;\n                        yearNumber = yearOfNextMonth;\n                    }\n                }\n\n                var dayConfig = {\n                        day: dayNumber,\n                        month: monthNumber,\n                        year: yearNumber,\n                        hasEvent: hasEvent,\n                        isSelected: isSelected,\n                        isToday: isToday,\n                        isDisabled: isDisabled,\n                        isEmpty: isEmpty,\n                        isStartRange: isStartRange,\n                        isEndRange: isEndRange,\n                        isInRange: isInRange,\n                        showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\n                        enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\n                    };\n\n                if (opts.pickWholeWeek && isSelected) {\n                    isWeekSelected = true;\n                }\n\n                row.push(renderDay(dayConfig));\n\n                if (++r === 7) {\n                    if (opts.showWeekNumber) {\n                        row.unshift(renderWeek(i - before, month, year));\n                    }\n                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\n                    row = [];\n                    r = 0;\n                    isWeekSelected = false;\n                }\n            }\n            return renderTable(opts, data, randId);\n        },\n\n        isVisible: function()\n        {\n            return this._v;\n        },\n\n        show: function()\n        {\n            if (!this.isVisible()) {\n                this._v = true;\n                this.draw();\n                removeClass(this.el, 'is-hidden');\n                if (this._o.bound) {\n                    addEvent(document, 'click', this._onClick);\n                    this.adjustPosition();\n                }\n                if (typeof this._o.onOpen === 'function') {\n                    this._o.onOpen.call(this);\n                }\n            }\n        },\n\n        hide: function()\n        {\n            var v = this._v;\n            if (v !== false) {\n                if (this._o.bound) {\n                    removeEvent(document, 'click', this._onClick);\n                }\n                this.el.style.position = 'static'; // reset\n                this.el.style.left = 'auto';\n                this.el.style.top = 'auto';\n                addClass(this.el, 'is-hidden');\n                this._v = false;\n                if (v !== undefined && typeof this._o.onClose === 'function') {\n                    this._o.onClose.call(this);\n                }\n            }\n        },\n\n        /**\n         * GAME OVER\n         */\n        destroy: function()\n        {\n            var opts = this._o;\n\n            this.hide();\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n            removeEvent(this.el, 'change', this._onChange);\n            if (opts.keyboardInput) {\n                removeEvent(document, 'keydown', this._onKeyChange);\n            }\n            if (opts.field) {\n                removeEvent(opts.field, 'change', this._onInputChange);\n                if (opts.bound) {\n                    removeEvent(opts.trigger, 'click', this._onInputClick);\n                    removeEvent(opts.trigger, 'focus', this._onInputFocus);\n                    removeEvent(opts.trigger, 'blur', this._onInputBlur);\n                }\n            }\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n        }\n\n    };\n\n    return Pikaday;\n}));\n"],"names":["root","factory","moment","exports","require","e","module","define","amd","req","Pikaday","this","hasMoment","hasEventListeners","window","addEventListener","document","sto","setTimeout","addEvent","el","callback","capture","attachEvent","removeEvent","removeEventListener","detachEvent","hasClass","cn","className","indexOf","addClass","removeClass","str","replace","trim","isArray","obj","test","Object","prototype","toString","call","isDate","isNaN","getTime","isWeekend","date","day","getDay","isLeapYear","year","getDaysInMonth","month","setToStartOfDay","setHours","compareDates","a","b","extend","to","from","overwrite","prop","hasProp","undefined","nodeName","Date","slice","fireEvent","eventName","data","ev","createEvent","initEvent","dispatchEvent","createEventObject","adjustCalendar","calendar","Math","ceil","abs","floor","defaults","field","bound","ariaLabel","position","reposition","format","parse","defaultDate","setDefaultDate","firstDay","formatStrict","minDate","maxDate","yearRange","showWeekNumber","pickWholeWeek","minYear","maxYear","minMonth","maxMonth","startRange","endRange","isRTL","yearSuffix","showMonthAfterYear","showDaysInNextAndPreviousMonths","enableSelectionDaysInNextAndPreviousMonths","numberOfMonths","mainCalendar","container","blurFieldOnSelect","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","theme","events","onSelect","onOpen","onClose","onDraw","keyboardInput","renderDayName","opts","abbr","renderDay","arr","ariaSelected","isEmpty","push","isDisabled","isToday","isSelected","hasEvent","isInRange","isStartRange","isEndRange","join","renderRow","days","isRowSelected","reverse","renderTitle","instance","c","refYear","randId","i","j","monthHtml","yearHtml","_o","isMinYear","isMaxYear","html","prev","next","renderTable","renderHead","options","self","config","_onMouseDown","_v","target","event","srcElement","parentNode","prevMonth","setDate","getAttribute","hide","blur","_c","preventDefault","returnValue","_onChange","gotoMonth","value","gotoYear","_onKeyChange","isVisible","keyCode","adjustDate","_onInputChange","firedBy","isValid","toDate","show","_onInputFocus","_onInputClick","_onInputBlur","pEl","activeElement","_b","_onClick","onchange","setAttribute","trigger","createElement","appendChild","body","insertBefore","nextSibling","defDate","gotoDate","disableWeekends","disableDayFn","nom","parseInt","setMinDate","setMaxDate","fallback","getFullYear","_d","toDateString","getMoment","setMoment","preventOnSelect","isMoment","getDate","draw","min","max","newCalendar","calendars","firstVisibleDate","lastVisibleDate","length","visibleDate","setMonth","getMonth","adjustCalendars","sign","newDay","difference","valueOf","gotoToday","setStartRange","setEndRange","force","_y","_m","random","substr","render","innerHTML","type","focus","adjustPosition","width","height","viewportWidth","viewportHeight","scrollTop","left","top","clientRect","leftAligned","bottomAligned","style","offsetWidth","offsetHeight","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","pageYOffset","getBoundingClientRect","pageXOffset","bottom","offsetLeft","offsetTop","offsetParent","now","before","row","yearOfPreviousMonth","yearOfNextMonth","daysInPreviousMonth","cells","after","d","m","y","onejan","isWeekSelected","r","dayNumber","monthNumber","yearNumber","dayConfig","unshift","v","destroy","removeChild"],"mappings":"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"}